<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Question 4</title>
    <style>
        #alert {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Whosville library book search</h1>
    <form action="http://library.whosville/bsearch" method="GET" onsubmit="validateForm(event)">
        <table>
            <tr>
                <td><label for="author">Author name:</label></td>
                <td><input type="text" name="author"></td>
            </tr>
            <tr>
                <td><label for="year">Publication year:</label></td>
                <td><input type="text" name="year"></td>
            </tr>
            <tr>
                <td>Subject:</td>
                <td>
                    <input type="checkbox" name="sub" value="mth">
                    <label for="mth">Mathematics</label> <br>
                    <input type="checkbox" name="sub" value="cs">
                    <label for="cs">Computer Science</label> <br>
                    <input type="checkbox" name="sub" value="bio">
                    <label for="bio">Biology</label> <br>
                    <input type="checkbox" name="sub" value="phy">
                    <label for="phy">Physics</label> <br>
                    <input type="checkbox" name="sub" value="chem">
                    <label for="chem">Chemistry</label> <br>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <span>
                        Prove that you are not a robot: 
                        <span id="mathProblem"></span>
                        <input type="number" id="answer" required> 
                        <span id="alert"></span>
                    </span>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <button type="submit" value="Search">Submit</button>
                    <button type="reset" value="Clear">Clear</button>
                </td>
            </tr>
        </table>
    </form>

    <script>
        var correctAnswer;

        function generateProblem() {
            var num1 = Math.floor(Math.random() * 10);
            var num2 = Math.floor(Math.random() * 10);
            correctAnswer = num1 + num2;

            document.getElementById("mathProblem").innerHTML = num1 + " + " + num2 + " = " 
        }
        function validateForm(event) {
            var userAnswer = parseInt(document.getElementById("answer").value);
            if (userAnswer !== correctAnswer) {
                event.preventDefault();
                document.getElementById("alert").innerHTML = "Wrong!"
                return false;
            }
        }
        window.onload = function() {
            generateProblem();
        }
    </script>
</body>
</html>

